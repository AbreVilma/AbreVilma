<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Abre Vilma | Madrid</title>
  <link rel="icon" href="img/logoAVcuadrado.jpg" type="image/jpg">
  <meta name="description" content="Especializado en vestidos de novia a medida e invitadas. Diseños únicos y exclusivos con la máxima calidad y atención personalizada.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="estilosAV.css" />
</head>
<body>

<!-- Header with Logo Initially, then Navigation after scroll -->
<header class="header" id="header">
  <!-- Logo inicial (visible al principio) -->
  <img src="img/logoAV.jpg" alt="AbreVilma" class="logoAV" />
  
  <!-- Navegación (visible después del scroll) -->
  <div class="nav-container" id="navContainer">
    <img src="img/logoAV.jpg" alt="AbreVilma" class="logo" />
    
    <button class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>

<!-- Spacer para cuando el header se vuelve fixed -->
<div class="header-spacer" id="headerSpacer"></div>

<!-- Mobile Menu -->
<nav class="mobile-menu" id="mobileMenu">
  <a href="#galeria">Creaciones</a>
  <a href="#historia">Historia</a>
  <a href="#contacto">Contacto</a>
</nav>

<section class="carousel-section" id="galeria">
  <div class="section">
    <h2>Nuestras Creaciones</h2>

    <!-- Botones de categoría -->
    <div class="tab-menu">
      <button class="tab-button active" data-category="novias">Novias</button>
      <button class="tab-button" data-category="madrinas">Madrinas</button>
      <button class="tab-button" data-category="invitadas">Invitadas</button>
    </div>

    <div class="carousel-container" id="carouselContainer">
    <div class="carousel-track" id="carouselTrack">
        </div>
    </div>
  </div>
</section>

<!-- Historia Section -->
<section class="section" id="historia">
  <h2>Nuestra Historia</h2>
  <div class="historia-content">
    <p>AbreVilma nació del sueño y la pasión por transformar momentos especiales en recuerdos eternos. Con más de una década de experiencia en alta costura, nuestro atelier se ha consolidado como referente en la creación de vestidos de novia a medida y piezas exclusivas para invitadas.</p>
    
    <p>Cada diseño refleja nuestra filosofía: combinar la elegancia clásica con toques contemporáneos, utilizando únicamente materiales de la más alta calidad y técnicas artesanales que han sido perfeccionadas durante años de dedicación.</p>
    
    <p>En AbreVilma, no solo creamos vestidos; creamos la expresión perfecta de tu personalidad y estilo, acompañándote en cada paso del proceso para garantizar que el día más importante de tu vida sea absolutamente perfecto.</p>
  </div>
</section>

<!-- Contact Section -->
<section class="contact-section" id="contacto">
  <div class="section">
    <h2>Contacto</h2>
    <div class="contact-grid">
      <div class="contact-info">
        <h3>Reserva tu cita personalizada</h3>
        <p>Trabajamos exclusivamente con cita previa para brindarte la atención personalizada que mereces.</p>
        
        <div class="contact-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24">
            <path d="M6.62 10.79a15.093 15.093 0 0 0 6.59 6.59l2.2-2.2a1 1 0 0 1 1.05-.24c1.12.37 2.33.57 3.54.57a1 1 0 0 1 1 1V21a1 1 0 0 1-1 1C10.07 22 2 13.93 2 4a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1c0 1.21.2 2.42.57 3.54a1 1 0 0 1-.24 1.05l-2.21 2.2z"/>
          </svg>
          <span><a href="tel:682450484"><strong>Teléfono:</strong> 682 450 484</a></span>
        </div>

        <div class="contact-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24">
            <path d="M20 2H4a2 2 0 0 0-2 2v16l4-4h14a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"/>
          </svg>
          <span><a href="https://wa.me/682450484"><strong>WhatsApp:</strong> 682 450 484</a></span>
        </div>

        <div class="contact-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24">
            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
          </svg>
          <span><strong>Dirección:</strong> Avenida del Ventisquero de la Condesa, 13 Local 26 - Madrid</span>
        </div>

        <div class="contact-item">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="white" viewBox="0 0 24 24">
            <path d="M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-14a6 6 0 0 1 6 6c0 1.1-.3 2.1-.8 3l-4.9-4.9V6h-1v5l5.6 5.6A6 6 0 0 1 12 20z"/>
          </svg>
          <span><strong>Horario:</strong> Lun-Vie 10:00-20:00h</span>
        </div>
      </div>
      
      <div class="map-container">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3034.455007176015!2d-3.721378380035727!3d40.487320422996945!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd42298e95b1be95%3A0xefeae4a0906da7ae!2sAv.%20del%20Ventisquero%20de%20la%20Condesa%2C%2013%2C%2028035%20Madrid!5e0!3m2!1ses!2ses!4v1673180272459!5m2!1ses!2ses" 
          allowfullscreen 
          loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade" 
          title="Ubicación AbreVilma Madrid">
        </iframe>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <p>&copy; 2025 AbreVilma - Todos los derechos reservados | Diseño y creación de vestidos de novia a medida.</p>
</footer>

<script>
// ===== HAMBURGER MENU =====
const hamburger = document.getElementById('hamburger');
const mobileMenu = document.getElementById('mobileMenu');

hamburger.addEventListener('click', () => {
  hamburger.classList.toggle('active');
  mobileMenu.classList.toggle('active');
  document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : 'auto';
});

mobileMenu.querySelectorAll('a').forEach(link => {
  link.addEventListener('click', () => {
    hamburger.classList.remove('active');
    mobileMenu.classList.remove('active');
    document.body.style.overflow = 'auto';
  });
});

// ===== SMOOTH SCROLLING =====
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      const header = document.querySelector('.header');
      const headerHeight = header.classList.contains('scrolled') ? header.offsetHeight : 0;
      const targetPosition = target.offsetTop - headerHeight;
      window.scrollTo({ top: targetPosition, behavior: 'smooth' });
    }
  });
});

// ===== HEADER SCROLL TRANSITION =====
const header = document.getElementById('header');
const headerSpacer = document.getElementById('headerSpacer');
let hasScrolled = false;

window.addEventListener('scroll', () => {
  const scrollY = window.scrollY;
  if (scrollY > 100 && !hasScrolled) {
    header.classList.add('scrolled');
    headerSpacer.classList.add('active');
    hasScrolled = true;
  } else if (scrollY <= 100 && hasScrolled) {
    header.classList.remove('scrolled');
    headerSpacer.classList.remove('active');
    hasScrolled = false;
  }
});

// ===== INTERSECTION OBSERVER FOR ANIMATIONS =====
const observerOptions = {
  threshold: 0.1,
  rootMargin: '0px 0px -50px 0px'
};

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      entry.target.style.opacity = '1';
      entry.target.style.transform = 'translateY(0)';
    }
  });
}, observerOptions);

document.addEventListener("DOMContentLoaded", () => {
  // Setup animations for sections
  document.querySelectorAll('.section').forEach(section => {
    if (!section.classList.contains('carousel-section')) {
      section.style.opacity = '0';
      section.style.transform = 'translateY(50px)';
      section.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
      observer.observe(section);
    }
  });

  // ===== NUEVA LÓGICA DEL CARRUSEL DESLIZABLE =====
  const categories = {
    novias: ["img/novias/1.jpg", "img/novias/2.jpg", "img/novias/3.jpg", "img/novias/4.jpg", "img/novias/5.jpg", "img/novias/6.jpg", "img/novias/7.jpg", "img/novias/8.jpg", "img/novias/9.jpg", "img/novias/10.jpg", "img/novias/11.jpg", "img/novias/12.jpg", "img/novias/13.jpg", "img/novias/14.jpg", "img/novias/15.jpg", "img/novias/16.jpg", "img/novias/17.jpg", "img/novias/18.jpg", "img/novias/19.jpg", "img/novias/20.jpg", "img/novias/21.jpg", "img/novias/22.jpg", "img/novias/23.jpg", "img/novias/24.jpg", "img/novias/25.jpg", "img/novias/26.jpg", "img/novias/27.jpg", "img/novias/28.jpg"],
    madrinas: ["img/madrina1.jpg", "img/madrina2.jpg", "img/madrina3.jpg", "img/madrina4.jpg"],
    invitadas: ["img/invitada1.jpg", "img/invitada2.jpg", "img/invitada3.jpg", "img/invitada4.jpg"]
  };

  let currentCategory = "novias";
  let currentIndex = 0;
  let isDragging = false;
  let startPosY = 0;
  let currentTranslate = 0;
  let prevTranslate = 0;

  const tabs = document.querySelectorAll(".tab-button");
  const carouselContainer = document.getElementById("carouselContainer");
  const carouselTrack = document.getElementById("carouselTrack");

  function loadCategoryImages(category) {
    carouselTrack.innerHTML = '';
    const images = categories[category];
    images.forEach(src => {
      const slide = document.createElement('div');
      slide.classList.add('carousel-slide');
      const img = document.createElement('img');
      img.src = src;
      img.alt = category.slice(0, -1); // 'novias' -> 'novia'
      slide.appendChild(img);
      carouselTrack.appendChild(slide);
    });
  }

  function setPositionByIndex() {
    currentTranslate = currentIndex * -carouselContainer.clientHeight;
    prevTranslate = currentTranslate;
    carouselTrack.style.transform = `translateY(${currentTranslate}px)`;
  }
  
  function animation() {
    carouselTrack.style.transform = `translateY(${currentTranslate}px)`;
    if(isDragging) requestAnimationFrame(animation);
  }

  function getPosition(event) {
    return event.type.includes('mouse') ? event.pageY : event.touches[0].clientY;
  }

  function touchStart(event) {
    isDragging = true;
    startPosY = getPosition(event);
    carouselTrack.style.transition = 'none'; // Desactiva la transición mientras se arrastra
    requestAnimationFrame(animation);
  }

  function touchMove(event) {
    if (isDragging) {
      const currentPosition = getPosition(event);
      currentTranslate = prevTranslate + currentPosition - startPosY;
    }
  }

  function touchEnd() {
    isDragging = false;
    const movedBy = currentTranslate - prevTranslate;

    // Lógica para cambiar de slide si el deslizamiento es suficiente
    if (movedBy < -100 && currentIndex < categories[currentCategory].length - 1) {
      currentIndex += 1;
    }
    if (movedBy > 100 && currentIndex > 0) {
      currentIndex -= 1;
    }
    
    carouselTrack.style.transition = 'transform 0.5s ease-out'; // Reactiva la transición
    setPositionByIndex();
  }

  // Event Listeners para el arrastre
  carouselContainer.addEventListener("mousedown", touchStart);
  carouselContainer.addEventListener("touchstart", touchStart, { passive: true });

  window.addEventListener("mouseup", touchEnd);
  window.addEventListener("touchend", touchEnd);

  window.addEventListener("mousemove", touchMove);
  window.addEventListener("touchmove", touchMove);
  
  // Event Listeners para los botones de categoría
  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active"));
      tab.classList.add("active");
      currentCategory = tab.dataset.category;
      currentIndex = 0;
      loadCategoryImages(currentCategory);
      setPositionByIndex();
    });
  });

  // Carga inicial
  loadCategoryImages(currentCategory);
  setTimeout(() => setPositionByIndex(), 100); // Pequeño delay para asegurar que el alto es correcto
  window.addEventListener('resize', setPositionByIndex); // Reajusta en cambio de tamaño
});
</script>

</body>
</html>